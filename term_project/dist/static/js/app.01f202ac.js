(function(e){function t(t){for(var a,s,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)s=i[p],n[s]&&d.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("04f5"),n=r.n(a);n.a},"04f5":function(e,t,r){},"272c":function(e,t,r){e.exports=r.p+"static/img/Car.9a17eec6.png"},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-link",{attrs:{to:{name:"home"}}},[r("h1",[e._v("Personal Car notebook")])]),r("router-view")],1)},o=[],s=(r("034f"),r("2877")),i={},c=Object(s["a"])(i,n,o,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=r("2f62"),p=r("bc3a"),d=r.n(p),m=r("a78e"),f=r.n(m),v=d.a.create({baseURL:"/api",timeout:5e3,headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")}});function h(e){return v.get(e).then(function(e){return e.data})}var g={fetchMessages:function(){return h("messages/")},postMessage:function(e){return v.post("messages/",e).then(function(e){return e.data})},deleteMessage:function(e){return v.delete("messages/".concat(e)).then(function(e){return e.data})},fetchPlaces:function(){return h("stantions/")},fetchCars:function(){return h("cars/")},fetchRepairs:function(e){return h("repairs?car=".concat(e))},fetchRepairById:function(e){return h("repairs?id=".concat(e))},fetchWorks:function(e){return h("works?repair=".concat(e))},fetchComponents:function(e){return h("components?repair=".concat(e))},fetchWorksByCar:function(e){return h("works?car=".concat(e))}},b={messages:[]},k={messages:function(e){return e.messages}},w={getMessages:function(e){var t=e.commit;g.fetchMessages().then(function(e){t("setMessages",e)})},addMessage:function(e,t){var r=e.commit;g.postMessage(t).then(function(){r("addMessage",t)})},deleteMessage:function(e,t){var r=e.commit;g.deleteMessage(t),r("deleteMessage",t)}},y={setMessages:function(e,t){e.messages=t},addMessage:function(e,t){e.messages.push(t)},deleteMessage:function(e,t){e.messages=e.messages.filter(function(e){return e.pk!==t})}},_={namespaced:!0,state:b,getters:k,actions:w,mutations:y},C=(r("ac6a"),r("7f7f"),r("c93e")),D={E:"Engine",T:"Transmission",U:"ECU",B:"Body",I:"Interior",O:"Other",S:"Suspension"};function S(e){return D[e]}var O=r("458e"),x={works:[],components:[],overview:null,workPieData:{},workBarData:{},repair:null,markers:[]},M={details:function(e){return e.works}},L={getDetails:function(e,t){var r=e.commit;r("cleanState"),g.fetchWorks(t).then(function(e){r("setWorks",e)}),g.fetchRepairById(t).then(function(e){r("setRepair",e)}),g.fetchComponents(t).then(function(e){r("setComponents",e)})},getOverview:function(e,t){var r=e.commit;r("calcOverview",t)}},j={cleanState:function(e){e.works=[],e.components=[]},setWorks:function(e,t){t.forEach(function(e){return e.category=S(e.category)}),e.works=t,e.workPieData=B(t),e.workBarData=R(t)},setComponents:function(e,t){e.markers=t.map(function(e){return O["L"].latLng(e.purchase_place.latitude,e.purchase_place.longitude)}),e.components=t},calcOverview:function(e,t){var r=t.works,a=t.components,n=r.reduce(function(e,t){return e+t.price},0),o=a.reduce(function(e,t){return e+t.price},0);e.overview={workSum:n,componentsSum:o,commonSum:n+o,kindsWork:P(r)}},setRepair:function(e,t){e.repair=t[0]}};function P(e){var t=e.map(function(e){return e.category});return t.filter(function(e,t,r){return r.indexOf(e)===t})}function B(e){return{columns:["date","value"],rows:F(e)}}function R(e){var t=F(e);return t.forEach(function(t){t.sum=e.reduce(function(e,r){return r.category===t.date?e+r.price:e},0)}),{columns:["date","value","sum"],rows:t}}function F(e){var t=P(e).map(function(e){return{date:e,value:0,sum:0}});return t.forEach(function(t){t.value=e.reduce(function(e,r){return r.category===t.date?e+1:e},0)}),t}var W={namespaced:!0,state:x,getters:M,actions:L,mutations:j},U={cars:[],repairs:[],workBarData:{}},I={cars:function(e){return e.cars}},T={getCars:function(e){var t=e.commit;g.fetchCars().then(function(e){t("setCars",e)})},showRepairs:function(e,t){var r=e.commit;g.fetchRepairs(t).then(function(e){r("setRepairs",e)}),g.fetchWorksByCar(t).then(function(e){r("setWorks",e)}),g.fetchPlaces().then(function(e){r("setPlaces",e)})}},E={setCars:function(e,t){e.repairs=[],e.cars=t},setRepairs:function(e,t){var r=t.map(function(e){return Object(C["a"])({},e,{place:e.place.titile+", "+e.place.address,masterName:e.master.name,"isСertifiedRepair":e.master.isMaster})});e.repairs=r},setWorks:function(e,t){t.forEach(function(e){return e.category=S(e.category)}),e.workBarData=R(t)},setPlaces:function(e,t){e.markers=t.map(function(e){return O["L"].latLng(e.latitude,e.longitude)})}},z={namespaced:!0,state:U,getters:I,actions:T,mutations:E};a["a"].use(l["a"]);var $=new l["a"].Store({modules:{messages:_,cars:z,repairs:W}}),N=r("8c4f"),V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("img",{attrs:{src:r("272c")}}),e.repairs.length>0?a("b-container",{staticClass:"bv-example-row"},[a("b-row",[a("b-col",[a("b-table",{attrs:{striped:"",hover:"",items:e.repairs,fields:e.repairFields},on:{"row-clicked":e.details}})],1),a("b-col",{attrs:{md:"6"}},[a("h3",[e._v("Sum by category")]),a("ve-pie",{attrs:{data:e.workBarData,settings:e.workDonutChartSettings}}),a("h3",[e._v("Count by category")]),a("ve-pie",{attrs:{data:e.workBarData,settings:e.workChartSettings}})],1)],1),a("div",{staticStyle:{height:"400px",weight:"300px"}},[a("l-map",{attrs:{zoom:e.zoom,center:e.center}},[a("l-tile-layer",{attrs:{url:e.url}}),e._l(e.markers,function(e,t){return a("l-marker",{key:t,attrs:{"lat-lng":e}})})],2)],1)],1):e._e(),0===e.cars.length?a("p",[e._v("No cars in book")]):e._e(),e.cars.length>0?a("b-container",{staticClass:"bv-example-row"},[a("b-row",e._l(e.cars,function(t,r){return a("b-col",{key:r},[a("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{overlay:"","img-src":"http://pngimages.net/sites/default/files/car-png-image-44997.png","img-alt":"Image","img-top":""}},[a("h4",[e._v(e._s(t.name))]),a("p",{staticClass:"card-text"},[e._v("\n            Car millage: "+e._s(t.milage)+" km\n          ")]),a("b-button",{staticStyle:{position:"relative",top:"80px"},on:{click:function(r){e.showRepairs(t.pk)}}},[e._v("\n            Show repairs history\n          ")])],1)],1)}))],1):e._e()],1)},J=[],A=r("9f7b"),H=(r("f9e3"),r("2dd8"),r("40ea")),X=r.n(H);r("6cc5");a["a"].component("l-map",O["LMap"]),a["a"].component("l-tile-layer",O["LTileLayer"]),a["a"].component("l-marker",O["LMarker"]),delete O["L"].Icon.Default.prototype._getIconUrl,O["L"].Icon.Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")}),a["a"].use(A["a"]);var q={components:{VePie:X.a},name:"main",data:function(){return{zoom:10,center:O["L"].latLng(56.459022,84.982145),url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",slide:0,sliding:null,repairFields:[{key:"place",sortable:!1},{key:"milage",sortable:!0},{key:"date",sortable:!0},{key:"masterName",sortable:!1},{key:"isСertifiedRepair",sortable:!1,label:"Сertified Repair"}],workDonutChartSettings:{dimension:"date",metrics:"sum"},workChartSettings:{dimension:"date",metrics:"value"}}},computed:Object(l["c"])({cars:function(e){return e.cars.cars},repairs:function(e){return e.cars.repairs},workBarData:function(e){return e.cars.workBarData},markers:function(e){return e.cars.markers}}),methods:Object(C["a"])({details:function(e){this.$router.push("/repair/".concat(e.pk))}},Object(l["b"])("cars",["showRepairs"])),created:function(){this.$store.dispatch("cars/getCars")}},G=q,K=(r("690a"),Object(s["a"])(G,V,J,!1,null,"9da3df12",null));K.options.__file="VueDemo.vue";var Q=K.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-tabs",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[r("b-tab",{attrs:{title:"Overview"}},[r("br"),null!==e.overview?r("b-row",[r("b-col",{staticStyle:{"text-align":"left"},attrs:{cols:"12",md:"8"}},[r("p",[e._v("Date of repar: "+e._s(e.repair.date))]),r("p",[e._v("Place: "+e._s(e.repair.place.titile))]),r("p",[e._v("Master: "+e._s(e.repair.master.name))]),r("p",[e._v("Works categories:")]),r("p",[e._v(e._s(e.overview.kindsWork))])]),r("b-col",{attrs:{cols:"6",md:"4"}},[r("div",[r("p",[e._v("Common work's price: "+e._s(e.overview.workSum))]),r("p",[e._v("Common compinents's price: "+e._s(e.overview.componentsSum))]),r("hr"),r("h4",[e._v("Common sum: "+e._s(e.overview.commonSum))])])])],1):e._e()],1),r("b-tab",{attrs:{title:"Price tables"}},[r("b-row",[r("b-col",[e.works.length>0?r("b-container",{staticClass:"bv-example-row"},[r("b-table",{attrs:{striped:"",hover:"",items:e.works,fields:e.workFields}})],1):e._e()],1),r("b-col",[e.components.length>0?r("b-container",{staticClass:"bv-example-row"},[r("b-table",{attrs:{striped:"",hover:"",items:e.components,fields:e.componentFields}})],1):e._e()],1)],1)],1),r("b-tab",{attrs:{title:"Works"}},[r("b-row",[r("b-col",{attrs:{md:"2"}}),r("b-col",{attrs:{md:"4"}},[r("ve-pie",{attrs:{data:e.workPieData,settings:e.workDonutChartSettings}})],1),r("b-col",{attrs:{md:"4"}},[r("ve-histogram",{attrs:{data:e.workBarData}})],1),r("b-col",{attrs:{md:"2"}})],1)],1),r("b-tab",{attrs:{title:"Components"}},[r("h4",[e._v("Components from shop "+e._s(e.repair.place.titile))]),r("div",{staticStyle:{height:"400px",weight:"300px"}},[r("l-map",{attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url}}),e._l(e.markers,function(e,t){return r("l-marker",{key:t,attrs:{"lat-lng":e}})})],2)],1)])],1)],1)},Z=[],ee=r("d768"),te=r.n(ee),re=r("6c83"),ae=r.n(re),ne=r("0457");a["a"].use(ne["a"]),a["a"].use(ae.a),a["a"].component("l-map",O["LMap"]),a["a"].component("l-tile-layer",O["LTileLayer"]),a["a"].component("l-marker",O["LMarker"]),delete O["L"].Icon.Default.prototype._getIconUrl,O["L"].Icon.Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")});var oe={components:{VePie:X.a,VeHistogram:te.a},name:"Details",data:function(){return{zoom:13,center:O["L"].latLng(56.459022,84.982145),url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",id:0,selected:1,workFields:[{key:"titile",label:"Title",sortable:!1},{key:"price",sortable:!0},{key:"category",sortable:!1}],componentFields:[{key:"titile",label:"Title",sortable:!1},{key:"price",sortable:!0}],workDonutChartSettings:{dimension:"date",metrics:"value"},options:{chart:{borderWidth:1},title:{text:"US population density (/km²)"},mapNavigation:{enabled:!0},series:[{data:[{value:438,code:"nj"},{value:387.35,code:"ri"},{value:312.68,code:"ma"},{value:271.4,code:"ct"},{value:209.23,code:"md"},{value:195.18,code:"ny"},{value:154.87,code:"de"},{value:114.43,code:"fl"},{value:107.05,code:"oh"},{value:105.8,code:"pa"},{value:86.27,code:"il"},{value:83.85,code:"ca"},{value:72.83,code:"hi"},{value:69.03,code:"va"},{value:67.55,code:"mi"},{value:65.46,code:"in"},{value:63.8,code:"nc"},{value:54.59,code:"ga"},{value:53.29,code:"tn"},{value:53.2,code:"nh"},{value:51.45,code:"sc"},{value:39.61,code:"la"},{value:39.28,code:"ky"},{value:38.13,code:"wi"},{value:34.2,code:"wa"},{value:33.84,code:"al"},{value:31.36,code:"mo"},{value:30.75,code:"tx"},{value:29,code:"wv"},{value:25.41,code:"vt"},{value:23.86,code:"mn"},{value:23.42,code:"ms"},{value:20.22,code:"ia"},{value:19.82,code:"ar"},{value:19.4,code:"ok"},{value:17.43,code:"az"},{value:16.01,code:"co"},{value:15.95,code:"me"},{value:13.76,code:"or"},{value:12.69,code:"ks"},{value:10.5,code:"ut"},{value:8.6,code:"ne"},{value:7.03,code:"nv"},{value:6.04,code:"id"},{value:5.79,code:"nm"},{value:3.84,code:"sd"},{value:3.59,code:"nd"},{value:2.39,code:"mt"},{value:1.96,code:"wy"},{value:.42,code:"ak"}],mapData:ae.a.maps["countries/us/us-all"],joinBy:["postal-code","code"],dataLabels:{enabled:!0,color:"#FFFFFF",format:"{point.code}"},name:"Population density"}]}}},watch:{selected:function(e){if(0===e){var t={works:this.works,components:this.components};this.$store.dispatch("repairs/getOverview",t)}}},computed:Object(l["c"])({works:function(e){return e.repairs.works},components:function(e){return e.repairs.components},overview:function(e){return e.repairs.overview},workPieData:function(e){return e.repairs.workPieData},workBarData:function(e){return e.repairs.workBarData},repair:function(e){return e.repairs.repair},markers:function(e){return e.repairs.markers}}),methods:Object(C["a"])({},Object(l["b"])("repairs",["drawMaps"])),created:function(){this.id=this.$route.params.id,this.$store.dispatch("repairs/getDetails",this.id)}},se=oe,ie=(r("810e"),Object(s["a"])(se,Y,Z,!1,null,"edfa1074",null));ie.options.__file="Details.vue";var ce=ie.exports;a["a"].use(N["a"]);var ue=new N["a"]({routes:[{path:"/",name:"home",component:Q},{path:"/repair/:id",name:"details",component:ce}]});a["a"].config.productionTip=!1;var le=new a["a"]({router:ue,store:$,render:function(e){return e(u)}});le.$mount("#app")},"690a":function(e,t,r){"use strict";var a=r("f1b3"),n=r.n(a);n.a},"810e":function(e,t,r){"use strict";var a=r("e412"),n=r.n(a);n.a},e412:function(e,t,r){},f1b3:function(e,t,r){}});
//# sourceMappingURL=app.01f202ac.js.map